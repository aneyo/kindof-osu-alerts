const DISPOSE_TIMEOUT=1e4,eventMessageFormat=e=>{switch(e.type){case"follow":return"New Follower: "+e.from;case"subscription":return formatSubscription(e);case"donation":return"Donation "+e.formattedAmount+" from "+e.from;case"host":case"raid":return e.type.charAt(0).toUpperCase()+e.type.slice(1)+" from "+e.from+" and "+(e.viewers||e.raiders)+" viewer(s)";case"bits":return e.amount+" bit(s) from "+e.from;case"merch":return e.from+" bought a "+e.product;default:return e.from+": "+e.tag}},formatSubscription=e=>"Subscription from "+e.from;let content,olds;document.addEventListener("onLoad",()=>{content=document.createElement("div"),content.id="alertu",olds=document.createElement("div"),olds.id="old-ones",content.appendChild(olds),document.body.appendChild(content)}),document.addEventListener("onEventReceived",e=>{let t,o=document.querySelector("body > .osu:first-child");o.children.item(0).textContent=eventMessageFormat(e.detail),content.appendChild(o),o.classList.add(e.detail.type),o.addEventListener("animationend",e=>{e.target.classList.contains("notification")&&(o.classList.contains("to-dispose")||(o.classList.add("to-dispose"),setTimeout(()=>{o.classList.add("is-dying"),o.addEventListener("animationend",e=>e.target.remove())},DISPOSE_TIMEOUT)))}),(t=document.querySelector("#alertu > .osu:not(:last-child)"))&&(olds.appendChild(t),document.querySelectorAll("#old-ones > .osu").forEach(e=>{e.style.display="none",e.offsetHeight,e.style.display=null}))});